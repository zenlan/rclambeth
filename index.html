<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Repair Cafe Lambeth</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css">
    <style type="text/css" media="screen">
        body {
            display: flex;
            min-height: 100vh;
            flex-direction: column;
        }

        #wrapper {
            flex: 1;
        }
    </style>
</head>

<body>
    <div id="wrapper" class="has-background-white-ter has-text-grey has-text-centered">
        <section class="">
            <div class="hero-body">
                <div class="container is-size-6-mobile">
                    <p><a id="website" href=""></a></p>
                    <p>Events: <span id="events"></span> </p>
                    <p>Fixed things: <span id="fixed"></span> </p>
                    <p>Emissions: <span id="co2_total"></span> </p>
                    <p>Waste: <span id="waste_total"></span> </p>
                    <p><a id="next" href="">Next Event</a></p>
                    <p>336 Brixton Rd, London SW9 7AA, UK</p>
                </div>
            </div>
        </section>
    </div>
    <script src="891.js"></script>
    <script>
        document.addEventListener(`DOMContentLoaded`, async () => {

            const data = response["data"]
            const d = new Date(data["next_event"]["start"]);
            document.getElementById("website").innerHTML = data["name"];
            document.getElementById("website").href = data["website"];
            document.getElementById("next").href = "https://restarters.net/party/view/" + data["next_event"]["id"];
            document.getElementById("next").innerHTML = "Next Event: " + d.toDateString();

            document.getElementById("events").innerHTML = data["stats"]["events"];
            document.getElementById("fixed").innerHTML = data["stats"]["fixed_devices"];
            document.getElementById("co2_total").innerHTML = Math.round(data["stats"]["co2_total"]) + ' kg';
            document.getElementById("waste_total").innerHTML = Math.round(data["stats"]["waste_total"]) + ' kg';

            // fetch('https://restarters.net/api/v2/groups/891',
            //     {
            //         headers: {
            //             "Accept": "application/json",
            //         }
            //     })
            //     .then(response => {
            //         if (!response.ok) {
            //             throw new Error('Network response was not ok');
            //         }
            //         return response.json();
            //     })
            //     .then(data => {
            //         console.log(data);
            //     })
            //     .catch(error => {
            //         console.error('There was a problem with the fetch operation:', error);
            //     });
        }, false);
    </script>
</body>

</html>